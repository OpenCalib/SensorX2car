

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Compiling a program &mdash; Matplotlib for C++  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="The Docs" href="docs.html" />
    <link rel="prev" title="Home" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Matplotlib for C++
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Content</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Compiling a program</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#includes-and-linking">Includes and Linking</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="docs.html">The Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html#questions">Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="todo.html">To do</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Matplotlib for C++</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Compiling a program</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/compiling.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="compiling-a-program">
<span id="compiling"></span><h1>Compiling a program<a class="headerlink" href="#compiling-a-program" title="Permalink to this headline">¶</a></h1>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>Matplotlib for C++ requires a working Python installation as well as
Matplotlib. Python2.7 and Python3 (&gt;= 3.6) have been tested, but
other versions should work as well. In the linking process the exact
version of Python to use can be specified by linking the according library.</p>
<p>On Unix it is recommended to install Python via the package manager to
assert that all dependencies are installed properly.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&lt;package-manager&gt; install python3 python3-dev  <span class="c1"># or -devel depending on the platform</span>
</pre></div>
</div>
<p>If Python is installed from source problems in the linking may occur.
How to resolve these is explained in the next section, or in
<a class="reference internal" href="#pyfromsource"><span class="std std-ref">this</span></a> code-block.</p>
<p>Install matplotlib via pip</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip3 install matplotlib  <span class="c1"># or pip for Python 2</span>
</pre></div>
</div>
</div>
<div class="section" id="includes-and-linking">
<h2>Includes and Linking<a class="headerlink" href="#includes-and-linking" title="Permalink to this headline">¶</a></h2>
<p>The header <code class="docutils literal notranslate"><span class="pre">matplotlibcpp.h</span></code> depends on the Python header, <code class="docutils literal notranslate"><span class="pre">Python.h</span></code>,
the corresponding Python library <code class="docutils literal notranslate"><span class="pre">libpython</span></code>, and on <code class="docutils literal notranslate"><span class="pre">numpy/arrayobject.h</span></code>.
If not in the standard include paths, the paths to the header files,
the path to the library, and the library itself have to be specified
for the compiler using the options <code class="docutils literal notranslate"><span class="pre">-I</span></code>, <code class="docutils literal notranslate"><span class="pre">-L</span></code> and <code class="docutils literal notranslate"><span class="pre">-l</span></code> respectively.
Note, that all Python constituents should be of the same Python version.
Matplotlib for C++ supports both, Python 2.7 and Python 3 versions.</p>
<p>In detail:</p>
<blockquote>
<div><ul>
<li><p class="first">The Python header <code class="docutils literal notranslate"><span class="pre">Python.h</span></code></p>
<p>The Python header comes with the Python installation. It it cannot be
found on your system try installing the Python development packages.
The location of this header has to be specified using the option <code class="docutils literal notranslate"><span class="pre">-I</span></code>.</p>
<p>Typical locations:</p>
<ul class="simple">
<li>Linux: <cite>/usr/local/include/python3.7</cite></li>
<li>Mac: if installed with Homebrew <cite>/usr/local/Cellar/python/3.7.3/Frameworks/Python.framework/Versions/3.7/include/python3.7m</cite></li>
</ul>
</li>
<li><p class="first">The Python library <code class="docutils literal notranslate"><span class="pre">libpython*.so</span></code></p>
<p>The program has to be linked against the compiled Python library.
Depending on the Python version the name of the library differs, for
Python 3.7 it is <code class="docutils literal notranslate"><span class="pre">libpython3.7.so</span></code> (or <code class="docutils literal notranslate"><span class="pre">libpython3.7m.so</span></code>).
Then link the library by specifying <code class="docutils literal notranslate"><span class="pre">-lpython3.7</span></code> (or <code class="docutils literal notranslate"><span class="pre">-lpython3.7m</span></code>).</p>
<p>Additionally to the linking the location of the library must be specified
if not installed in the usual directory. For Linux systems this is
usually not necessary, for Mac however it mostly is.
The location of the library has to be specified using the option <code class="docutils literal notranslate"><span class="pre">-L</span></code>.</p>
<p>If Python has not been installed using the package manager (but e.g.
from source) twofold problems with linking the library can occur.
The first are missing dependencies of the Python library, these can be
added via <code class="docutils literal notranslate"><span class="pre">-lpthread</span> <span class="pre">-lutil</span> <span class="pre">-ldl</span></code>.
The second is that dynamic libraries have to be exported which is
resolved by adding <code class="docutils literal notranslate"><span class="pre">-Xlinker</span> <span class="pre">-export-dynamic</span></code>.</p>
<p>Typical locations:</p>
<ul class="simple">
<li>Linux: Path usually already included</li>
<li>Mac: <cite>/usr/local/Cellar/python/3.7.3/Frameworks/Python.framework/Versions/3.7/lib</cite></li>
</ul>
</li>
<li><p class="first">Numpy array <code class="docutils literal notranslate"><span class="pre">numpy/arrayobject.h</span></code></p>
<p>By default Matplotlib for C++ uses Numpy arrays. This requires the above
header file. However it is possible to avoid this header by defining
<code class="docutils literal notranslate"><span class="pre">-DWITHOUT_NUMPY</span></code>.</p>
<ul class="simple">
<li>Linux: <cite>/usr/local/lib/python3.7/site-packages/numpy/core/include</cite></li>
<li>Mac: If installed via Homebrew, same as for Linux.</li>
</ul>
</li>
</ul>
</div></blockquote>
<p><strong>Examples</strong></p>
<p>On Linux with the GNU compiler <code class="docutils literal notranslate"><span class="pre">g++</span></code> and
C++11.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># using Python 2.7</span>
g++ main.cpp -std<span class="o">=</span>c++11 -I/usr/local/include/python2.7 <span class="se">\</span>
  -I/usr/local/lib/python2.7/site-packages/numpy/core/include -lpython2.7
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># using Python3.7 and no Numpy</span>
g++ main.cpp -std<span class="o">=</span>c++11 -DWITHOUT_NUMPY -I/usr/local/include/python2.7 -lpython2.7
</pre></div>
</div>
<p>On Mac with the GNU compiler <code class="docutils literal notranslate"><span class="pre">g++</span></code> and C++14.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>g++ main.cpp -std<span class="o">=</span>c++14 <span class="se">\</span>
 -I /usr/local/Cellar/python/3.7.3/Frameworks/Python.framework/Versions/3.7/include/python3.7m <span class="se">\</span>
 -I /usr/local/lib/python3.7/site-packages/numpy/core/include <span class="se">\</span>
 -L /usr/local/Cellar/python/3.7.3/Frameworks/Python.framework/Versions/3.7/lib <span class="se">\</span>
 -lpython3.7
</pre></div>
</div>
<p>With exporting dynamic libraries and linking to all dependencies of
the Python library on a Linux system:</p>
<div class="highlight-bash notranslate" id="pyfromsource"><div class="highlight"><pre><span></span>g++ main.cpp -std<span class="o">=</span>c++11 -I/usr/local/include/python3.7m <span class="se">\</span>
  -I/usr/local/lib/python3.7/site-packages/numpy/core/include <span class="se">\</span>
  -lpython3.7m <span class="se">\</span>
  -lpthread -lutil -ldl <span class="se">\ </span><span class="c1"># library dependencies</span>
  -Xlinker -export-dynamic <span class="se">\ </span><span class="c1"># export dynamic libraries</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="docs.html" class="btn btn-neutral float-right" title="The Docs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Home" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Documentation: 2019, Julien Gacon. Library: 2014, Benno Evers

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>